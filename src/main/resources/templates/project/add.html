<!DOCTYPE html>
<!-- saved from url=(0052)http://getbootstrap.com/docs/4.0/examples/dashboard/ -->
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="description" content="">
	<meta name="author" content="">

	<title>中国知网大数据融合应用平台</title>

	<link href="asserts/css/bootstrap.min.css" th:href="@{/webjars/bootstrap/4.0.0/css/bootstrap.css}" rel="stylesheet">
	<link href="asserts/css/dashboard.css" th:href="@{/asserts/css/dashboard.css}" rel="stylesheet">
	<link href="asserts/element2.10.1/index.css" th:href="@{/asserts/element2.10.1/index.css}" rel="stylesheet">
	<link href="asserts/css/myCSS.css" th:href="@{/asserts/css/myCSS.css}" rel="stylesheet">
	<link href="asserts/css/myManager.css" th:href="@{/asserts/css/myManager.css}" rel="stylesheet">
	<link href="asserts/css/myCutWord.css" th:href="@{/asserts/css/myCutWord.css}" rel="stylesheet">
</head>

<body>
	<div id="app">

		<div id="appheader">
			<div class="top">
				<a  th:href="@{/redirectToMain}">
					<h1  style="color: #ffffff; margin-left: 10px; margin-top: 20px" class="top-t" >中国知网大数据融合应用平台</h1>
				</a>
			</div>
		</div>

		<div  >
			<div class="dsource-wrap" style="margin-top: 5px">
				<!-- 左侧  -->
				<el-scrollbar class="dictionary-l">
					<ul class="manager-nav dictionary-nav">
						<li class="m-a">
							<svg class="icon" aria-hidden="true">
								<use xlink:href="#icon-hh2"></use>
							</svg>
							<ul class="manager-sec">
								<li><a class="m-a cur" href="javascript:;">项目信息</a></li>
								<li><a th:href="@{/userProjects}">人员信息</a></li>
							</ul>
						</li>
					</ul>
				</el-scrollbar>

				<el-scrollbar class="dsource-r">
					<div class="form-group">
						<label style="display: inline">项目名称：</label>
						<input type="text" class="form-control" style="width: 200px; display: inline" placeholder=""  v-model="project.projectName">

						<label style="margin-left: 50px; display: inline">设计阶段：</label>
						<input type="text" class="form-control" style="width: 200px; display: inline" placeholder=""  v-model="project.designPhase">

						<label style="margin-left: 50px; display: inline">开始时间：</label>
						<input type="text" class="form-control" style="width: 200px; display: inline" placeholder=""  v-model="project.startTime">

						<label style="margin-left: 50px; display: inline">结束时间：</label>
						<input type="text" class="form-control" style="width: 200px; display: inline" placeholder=""  v-model="project.stopTime">

						<button  class="btn btn-primary"  style="margin-left: 200px" @click="projectSaveClick">保存</button>
					</div>

					<button type="button" class="btn btn-sm alert-info" data-toggle="modal" data-target="#projectSubitemEditModel">添加</button>

					<div class="table-responsive" style="margin-top: 10px">
						<div class="ds-table-wrap" >
							<el-table style="width: 100%;" :data="tableData" class="x-table table-td0">
								<el-table-column type="selection" width="55"></el-table-column>
								<!--<el-table-column label="序号" width="60" type="index">-->
								<!--<template slot-scope="scope"><span>{{ scope.row.serialNumber }}</span></template>-->
								<!--</el-table-column>-->
								<el-table-column label="专业分项">
									<template slot-scope="scope"><a  target="_blank">{{ scope.row.professionalSubOption }} </a></template>
								</el-table-column>
								<el-table-column label="任务级别">
									<template slot-scope="scope"><span>{{ scope.row.taskLevel }}</span></template>
								</el-table-column>
								<el-table-column label="开始时间">
									<template slot-scope="scope"><span>{{ scope.row.startTime }}</span></template>
								</el-table-column>
								<el-table-column  label="截止时间">
									<template slot-scope="scope"><span>{{ scope.row.stopTime }}</span></template>
								</el-table-column>
								<el-table-column  label="目前进度">
									<template slot-scope="scope"><span>{{ scope.row.currentProcess }}</span></template>
								</el-table-column>
								<el-table-column label="操作" min-width="100">
									<template slot-scope="scope">
										<el-button class="btn-line btn-0 cur" size="mini">编辑</el-button>
										<el-button class="btn-line btn-0" size="mini">删除</el-button>
									</template>
								</el-table-column>
							</el-table>
							<el-pagination class="txtCenter"
										   @size-change="handleSizeChange"
										   @current-change="handleCurrentChange"
										   :current-page.sync="currentPage"
										   :page-sizes="[10,20,30,50]"
										   :page-size="100"
										   layout=" sizes, prev, pager, next"
										   :total="1">
							</el-pagination>
						</div>
					</div>
				</el-scrollbar>
			</div>
		</div>

	</div>
</body>


		<!-- Modal -->
		<div class="modal fade" id="projectSubitemEditModel" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
			<div class="modal-dialog modal-dialog-centered" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<div class="modal-body">
						<form th:action="@{/projectSubitem}" method="post">
							<input type="hidden" name="_method" value="put" th:if="${editProjectSubitem!=null}"/>
							<input type="hidden" name="id" id="id_projectSubitem_id" >
							<div class="form-group">
								<label>专业分项</label>
								<input name="professionalSubOption" type="text" class="form-control" placeholder="" id="id_projectSubitem_professionalSubOption">
							</div>
							<div class="form-group">
								<label>任务级别</label>
								<input name="taskLevel" type="text" class="form-control" placeholder="" id="id_projectSubitem_taskLevel">
							</div>
							<div class="form-group">
								<label>开始时间</label>
								<input name="startTime" type="text" class="form-control" placeholder="" id="id_projectSubitem_startTime">
							</div>
							<div class="form-group">
								<label>截止时间</label>
								<input name="stopTime" type="text" class="form-control" placeholder="" id="id_projectSubitem_stopTime">
							</div>
							<div class="form-group">
								<label>目前进度</label>
								<input name="currentProcess" type="number" class="form-control" placeholder="" id="id_projectSubitem_currentProcess">
							</div>
							<div class="modal-footer">
								<button type="submit" class="btn btn-primary" >保存</button>
							</div>
						</form>
					</div>

				</div>
			</div>
		</div>


		<script type="text/javascript" src="asserts/js/jquery-3.2.1.slim.min.js" th:src="@{/webjars/jquery/3.3.1/jquery.js}"></script>
		<script type="text/javascript" src="asserts/js/popper.min.js" th:src="@{/webjars/popper.js/1.11.1/dist/popper.js}"></script>
		<script type="text/javascript" src="asserts/js/bootstrap.min.js" th:src="@{/webjars/bootstrap/4.0.0/js/bootstrap.js}"></script>

		<script type="text/javascript" src="asserts/js/feather.min.js" th:src="@{/asserts/js/feather.min.js}"></script>
		<script type="text/javascript" src="asserts/js/vue.js" th:src="@{/asserts/js/vue.js}"></script>
		<script type="text/javascript" src="asserts/js/iconfont.js" th:src="@{/asserts/js/iconfont.js}"></script>
		<script type="text/javascript" src="asserts/element2.10.1/index.js" th:src="@{/asserts/element2.10.1/index.js}"></script>

		<script>
			feather.replace()
		</script>

		<script th:inline="javascript" type="text/javascript">

			var projectId =[[ ${projectId}]]
			console.log(projectId)

			var app = new Vue({
				el: '#app',
				data: {
					dialogFormVisible: false,
					currentPage: 1,
					tableData: null,
					searchKey: null,
					project: {
						projectName: "",
						designPhase: null,
						startTime: null,
						stopTime: null,
					},
				},
				methods: {
					handleSizeChange(val) {
						console.log(`每页 ${val} 条`);
					},
					handleCurrentChange(val) {
						console.log(`当前页: ${val}`);
					},
					searchClick :function () {
						var ajaxData = {}
						ajaxData.projectName = encodeURI(app.searchKey);
						console.log(ajaxData)
						var type = "GET"
						var url = "project/findByProjectName"
						sendAjax(ajaxData, type, url)
					},
					projectSaveClick: function () {
						var ajaxData = {}
						ajaxData.project = encodeURI(JSON.stringify(app.project))
						var type = "GET"
						var url = "save"
						sendAjax(ajaxData, type, url)
					}
				}

			})

			/**
			 * 给表赋值
			 * @type {{}}
			 */
			var ajaxData = {}
			ajaxData.projectId = projectId
			$.ajax({
				data: ajaxData,
				type: "GET",
				url: "projectSubitem/findByProjectId",
				success: function (result) {
					if(result.code == 200){
						app.$data.tableData=result.data
					}else{
						console.log("返回值失败")
					}

				}
			})

			/**
			 * 项目信息
			 * @type {{}}
			 */
			var ajaxData = {}
			ajaxData.projectId = projectId
			$.ajax({
				data: ajaxData,
				type: "GET",
				url: "findByProjectId",
				success: function (result) {
					if(result.code == 200){
						app.project=result.data
					}else{
						console.log("返回值失败")
					}

				}
			})


			function sendAjax(ajaxData, type, url) {
				$.ajax({
					data: ajaxData,
					type: type,
					url: url,
					success: function (result) {
						if(result.code == 200){
							app.$data.tableData=result.data
						}else{
							console.log("返回值失败")
						}

					}
				})
			}



		</script>


	</body>

</html>